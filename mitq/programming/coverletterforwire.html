<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Cover Letter for Wire</title>
        <link rel="alternate" type="application/rss+xml" title="AV notes" href="../../rss.xml" />
        <link rel="shortcut icon" href="../../favicon.ico?v=2" type="image/x-icon" />
        <link rel="stylesheet" href="../../css/bootstrap.min.css" />
        <link rel="stylesheet" href="../../css/bootstrap-theme.min.css" />
        <link rel="stylesheet" href="../../css/default.css" />
        <link rel="stylesheet" href="../../css/syntax.css" />
          <link rel="stylesheet" href="../../css/quotes.css" />
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" />
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config( { tex2jax: { inlineMath: [ ["\\(", "\\)"] ]
                                           , displayMath: [ ["\\[", "\\]" ] ]
                                           , processEscapes: true
                                           }
                              });



        </script>
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>

        <script type="text/javascript" src="../../js/jquery.min.js">
        </script>
        <script type="text/javascript" src="../../js/bootstrap.min.js">
        </script>
        <script type="text/javascript" src="../../js/codeCopy.js">
        </script>

    </head>
    <body>
        <div class="container">


            <div id="header">

                <ul id="navigation" class="list-inline text-center">
                    <li class="logo"><a href="../../" class="home-link">ԳԼԽԱՎՈՐ</a></i>
                    <li><a href="../../hogi/">ՀՈԳԻ</a></li>
                    <li><a href="../../mitq/">ՄԻՏՔ</a></li>
                    <li><a href="../../marmin/">ՄԱՐՄԻՆ</a></li>
                    <li><a href="../../rss.xml"><i class="fa fa-rss"></i></a></li>
                    <!-- <li><a href="/atom.xml"><i class="fa fa-rss"></i></a></li> -->
                </ul>
            </div>
            <div class="clear"></div>
            <!---->

  <div class="clear"></div>
<!--  <p style="font-size: 11px;"><strong>Ուշադրություն.</strong> <small>«իմաստասէր» բառը պետք է հասկանալ տառացի. ոչ որպէս փիլիսոփա իմաստով:</small></p> -->
            <div id="content">

               <!-- <div class="title text-center">
                    <h4>Cover Letter for Wire</h4>
                    <hr>
                </div> -->
                <div class="post-content">
<section id="cover-letter" class="level1">
<h1>Cover Letter</h1>
<p>Hi,</p>
<p>I am excited about the opportunity to join a team that does functional programming, uses open source tools and makes open source software. I’m actively developing my side project that utilizes a few popular open source tools and the FP languages (Haskell, Elm) which interest me a lot.</p>
<p>I work in the team who use only Microsoft languages, tools and all on Windows OS.</p>
<p>In general, I learn FP concepts continuously using <strong>Haskell</strong>, <strong>Racket</strong>. On 2017 I decided to use Haskell to develop backend to serve IoT devices. I’m going to build my cover letter by answering to the <a href="https://wire.softgarden.io/job/2105535?l=en">requirements</a> section concerning what I have done and what I’m going to do in the future. All work was done single-handedly with zero experience in linux and all tools i have used, I will do my best if i have chance to work with experts of FP, distributed and scalable systems.</p>
</section>
<section id="requirements" class="level1">
<h1>Requirements</h1>
<section id="excited-about-designing-building-and-running-distributed-and-scalable-systems" class="level2">
<h2>*Excited about designing, building, and running distributed and scalable systems</h2>
<p>I have manage to set up hetzner’s virtual linux machines for development, testing and prodcution, my <a href="http://imast.am/mitq/programming/deployment.html">set up notes</a> (by looking to move use ansible to automate set up process). I design the backend scalability in mind, each device know about two backends, first backend’s address(will be moved on the AWS or IBC cloud) is burned into firmware this backend the devices uses to get configuration with second backend address which uses send data, for login, to auth to get commands and etc. Set up nginx.</p>
<p><strong>TODO:</strong></p>
<ul>
<li>investigate and use floating IPs that hetzner provide.</li>
<li>use docker technologies with private docker repository</li>
</ul>
</section>
<section id="interest-in-statically-typed-functional-languages-is-a-big-plus" class="level2">
<h2>*Interest in statically-typed functional languages is a big plus</h2>
<p>I love to let the language to validate my program at compile time, I am very excited about GHC’s <code>GADTs, DataKinds, TypeFamilies,
   TypeOperators</code> language extensions that brings Dependent type elements to haskell. Also I found also Elm language, which helps me to avoid writing code in JavaScript as much as possible.</p>
</section>
<section id="passion-for-clean-code-and-elegant-solutions-continuously-improving-current-ones" class="level2">
<h2>*Passion for clean code and elegant solutions (continuously improving current ones)</h2>
<p>I periodically re-wording and formatting my comments to help haddock generate better documents. I like the dependently typed languages concepts and looking forward to use them. I think I have found and implemented elegant solutionsin my current project, how to send commands to device, how to scale easily without any magic when there will be many devices. Haskell like math, there is no limit of improvements.</p>
<p>Have written several tests for backend, need more.</p>
<p><strong>TODO:</strong></p>
<ul>
<li>move to use MQTT protocol in the device side.</li>
<li>set up swagger document page for endpoints.</li>
<li>write more tests</li>
<li>use real time monitoring of backend application health</li>
</ul>
</section>
<section id="we-highly-value-experience-with" class="level2">
<h2>We highly value experience with:</h2>
<ul>
<li><p>AWS (or other cloud providers) Using S3, Route53 Testing to use IBM Cloud Iot platform to store device configs(first backend)</p></li>
<li><p>Automating builds and deployments</p>
<p>I have automated my deployment with <a href="http://nadarei.co/mina/">mina</a>, i use for both backend and for web application, it is DSL to describe deployment, which allows to generate on fly ngxin, logrotate and other configuration based on deployment environments {Production, Test, Staging}, then mina translates to bash script and runs it on remote server. <a href="#samples">mina config smaple</a></p>
<p>set up cron job for <a href="https://backup.github.io/backup/v4/installation/">backup gem</a> to make and store db backups to S3</p>
<p>I know about CI, have not set it up yet.</p></li>
<li><p>Unix/Linux environments, including the ability to analyze and troubleshoot potential networking issues</p>
<p>As I told already all my app live in linux, I enable firewall, open close ports, check which program listens for given port, ping, set domain name. These are usually what I have done related to the networking on Linux environments.</p></li>
<li><p>Containerization technologies</p>
I set up docker and configure to run my web app on it, i know about ~ Kubernetes and Docker Swarm~ Next steps of migration to full dockerized deployment are:
<ol>
<li>Build containers for:
<ul>
<li>postgreSQL</li>
<li>Redis</li>
<li>nginx</li>
<li>backend</li>
<li>web application</li>
</ul></li>
<li>Configure Docker Orchestration</li>
</ol></li>
<li><p>Coding in Rust</p>
<p>I heard about Rust that it has something similar which we have for Type classes in Haskell, also that it can be used to program for Rasberry pi and is good for system programming, something that come to replace <code>C</code>, this all what I know about Rust. I have never tried it, but language featuring looks promising.</p></li>
</ul>
</section>
</section>
<section id="samples" class="level1">
<h1>samples</h1>
<section id="deployment-code-sample-mina" class="level2">
<h2>Deployment code sample (mina)</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode ruby"><code class="sourceCode ruby"><a class="sourceLine" id="cb1-1" data-line-number="1">desc <span class="st">&quot;Populate logrotote&quot;</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">task :<span class="st">'setup:logrotate_config'</span> =&gt; <span class="st">:remote_environment</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  logrotate_conf = &lt;&lt;-<span class="kw">LOGR</span><span class="ot">.dedent</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="ot">    #{</span>fetch(<span class="st">:deploy_to</span>)<span class="ot">}/shared/Backup/log/*.log</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="ot">    #{</span>fetch(<span class="st">:deploy_to</span>)<span class="ot">}/shared/log/*.log</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="ot">    #{</span>fetch(<span class="st">:deploy_to</span>)<span class="ot">}/shared/log/*/*.log {</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="ot">                daily</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="ot">                dateext</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="ot">                dateformat -%d.%m.%Y</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="ot">                missingok</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="ot">                rotate 5</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="ot">                compress</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="ot">                delaycompress</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="ot">                notifempty</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="ot">                sharedscripts</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="ot">                copytruncate</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="ot">                }</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="ot">    LOGR</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="ot">  command %{</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="ot">      echo &quot;-----&gt; Populating log rotation config&quot;</span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="ot">      echo &quot;#{</span>logrotate_conf<span class="ot">}&quot; &gt; #{</span>fetch(<span class="st">:deploy_to</span>)<span class="ot">}/shared/config/log_rotation.conf</span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23"><span class="ot">      sudo chmod 644 #{</span>fetch(<span class="st">:deploy_to</span>)<span class="ot">}/shared/config/log_rotation.conf</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24"><span class="ot">      # sudo ln -nfs #{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}/config/log_rotation.conf /etc/logrotate.d/#{</span>fetch(<span class="st">:application_name</span>)<span class="ot">}</span></a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="ot">      sudo cp #{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}/config/log_rotation.conf /etc/logrotate.d/#{</span>fetch(<span class="st">:application_name</span>)<span class="ot">}</span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26"><span class="ot">      echo &quot;-----&gt; Done&quot;</span></a>
<a class="sourceLine" id="cb1-27" data-line-number="27"><span class="ot">  }</span></a>
<a class="sourceLine" id="cb1-28" data-line-number="28"></a>
<a class="sourceLine" id="cb1-29" data-line-number="29"><span class="ot"> end</span></a>
<a class="sourceLine" id="cb1-30" data-line-number="30"></a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode ruby"><code class="sourceCode ruby"><a class="sourceLine" id="cb2-1" data-line-number="1"></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">task <span class="st">:test</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  set <span class="st">:deploy_to</span>, <span class="st">&quot;</span><span class="ot">#{</span>fetch(<span class="st">:deploy_to</span>)<span class="ot">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">  set <span class="st">:rails_env</span>, <span class="st">'production'</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  set <span class="st">:domain</span>, <span class="st">'test.taxicenter.am'</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">  set <span class="st">:www_domain</span>, <span class="st">'test.taxicenter.am'</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="kw">end</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"></a>
<a class="sourceLine" id="cb2-9" data-line-number="9">task <span class="st">:staging</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10">  set <span class="st">:deploy_to</span>, <span class="st">&quot;</span><span class="ot">#{</span>fetch(<span class="st">:deploy_to</span>)<span class="ot">}</span><span class="st">-staging&quot;</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11">  set <span class="st">:rails_env</span>, <span class="st">'staging'</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12">  set <span class="st">:domain</span>, <span class="st">'staging.taxicenter.am'</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13">  set <span class="st">:www_domain</span>, <span class="st">'staging.taxicenter.am'</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#  set :branch, 'develop'</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="kw">end</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"></a>
<a class="sourceLine" id="cb2-17" data-line-number="17">task <span class="st">:production</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18">  set <span class="st">:rails_env</span>, <span class="st">'production'</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19">  set <span class="st">:branch</span>, <span class="st">'master'</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20">  set <span class="st">:domain</span>, <span class="st">'taxicenter.am'</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21">  set <span class="st">:www_domain</span>, <span class="st">'www.taxicenter.am'</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="kw">end</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"></a>
<a class="sourceLine" id="cb2-25" data-line-number="25">task <span class="st">:setup</span> =&gt; <span class="st">:remote_environment</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"></a>
<a class="sourceLine" id="cb2-27" data-line-number="27">  <span class="co"># Puma needs a place to store its pid file and socket file.</span></a>
<a class="sourceLine" id="cb2-28" data-line-number="28">  command <span class="ot">%(</span><span class="st">mkdir -p &quot;</span><span class="ot">#{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}</span><span class="st">/tmp/&quot;</span><span class="ot">)</span></a>
<a class="sourceLine" id="cb2-29" data-line-number="29">  command <span class="ot">%(</span><span class="st">chmod g+rx,u+rwx &quot;</span><span class="ot">#{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}</span><span class="st">/tmp&quot;</span><span class="ot">)</span></a>
<a class="sourceLine" id="cb2-30" data-line-number="30"></a>
<a class="sourceLine" id="cb2-31" data-line-number="31">  command <span class="ot">%(</span><span class="st">mkdir -p &quot;</span><span class="ot">#{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}</span><span class="st">/log/&quot;</span><span class="ot">)</span></a>
<a class="sourceLine" id="cb2-32" data-line-number="32">  command <span class="ot">%(</span><span class="st">chmod g+rx,u+rwx &quot;</span><span class="ot">#{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}</span><span class="st">/log&quot;</span><span class="ot">)</span></a>
<a class="sourceLine" id="cb2-33" data-line-number="33">  command <span class="ot">%(</span><span class="st">mkdir -p &quot;</span><span class="ot">#{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}</span><span class="st">/log/puma&quot;</span><span class="ot">)</span></a>
<a class="sourceLine" id="cb2-34" data-line-number="34">    command <span class="ot">%(</span><span class="st">chmod g+rx,u+rwx &quot;</span><span class="ot">#{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}</span><span class="st">/log/puma&quot;</span><span class="ot">)</span></a>
<a class="sourceLine" id="cb2-35" data-line-number="35">  command <span class="ot">%(</span><span class="st">mkdir -p &quot;</span><span class="ot">#{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}</span><span class="st">/log/nginx&quot;</span><span class="ot">)</span></a>
<a class="sourceLine" id="cb2-36" data-line-number="36">  command <span class="ot">%(</span><span class="st">chmod g+rx,u+rwx &quot;</span><span class="ot">#{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}</span><span class="st">/log/nginx&quot;</span><span class="ot">)</span></a>
<a class="sourceLine" id="cb2-37" data-line-number="37"></a>
<a class="sourceLine" id="cb2-38" data-line-number="38">  command <span class="ot">%(</span><span class="st">mkdir -p &quot;</span><span class="ot">#{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}</span><span class="st">/tmp/sockets&quot;</span><span class="ot">)</span></a>
<a class="sourceLine" id="cb2-39" data-line-number="39">  command <span class="ot">%(</span><span class="st">chmod g+rx,u+rwx &quot;</span><span class="ot">#{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}</span><span class="st">/tmp/sockets&quot;</span><span class="ot">)</span></a>
<a class="sourceLine" id="cb2-40" data-line-number="40"></a>
<a class="sourceLine" id="cb2-41" data-line-number="41">  command <span class="ot">%(</span><span class="st">mkdir -p &quot;</span><span class="ot">#{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}</span><span class="st">/backup&quot;</span><span class="ot">)</span></a>
<a class="sourceLine" id="cb2-42" data-line-number="42">  command <span class="ot">%(</span><span class="st">chmod g+rx,u+rwx &quot;</span><span class="ot">#{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}</span><span class="st">/backup&quot;</span><span class="ot">)</span></a>
<a class="sourceLine" id="cb2-43" data-line-number="43"></a>
<a class="sourceLine" id="cb2-44" data-line-number="44">  command <span class="ot">%(</span><span class="st">mkdir -p &quot;</span><span class="ot">#{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}</span><span class="st">/tmp/pids&quot;</span><span class="ot">)</span></a>
<a class="sourceLine" id="cb2-45" data-line-number="45">  command <span class="ot">%(</span><span class="st">chmod g+rx,u+rwx &quot;</span><span class="ot">#{</span>fetch(<span class="st">:shared_path</span>)<span class="ot">}</span><span class="st">/tmp/pids&quot;</span><span class="ot">)</span></a>
<a class="sourceLine" id="cb2-46" data-line-number="46"></a>
<a class="sourceLine" id="cb2-47" data-line-number="47">  invoke :<span class="st">'setup:db:database_yml'</span></a>
<a class="sourceLine" id="cb2-48" data-line-number="48">  invoke :<span class="st">'setup:db:redis_yml'</span></a>
<a class="sourceLine" id="cb2-49" data-line-number="49">  invoke :<span class="st">'setup:puma_config'</span></a>
<a class="sourceLine" id="cb2-50" data-line-number="50">  invoke :<span class="st">'setup:secrets_yml'</span></a>
<a class="sourceLine" id="cb2-51" data-line-number="51">  invoke :<span class="st">'setup:nginx_config'</span></a>
<a class="sourceLine" id="cb2-52" data-line-number="52">  invoke :<span class="st">'setup:logrotate_config'</span></a>
<a class="sourceLine" id="cb2-53" data-line-number="53"></a>
<a class="sourceLine" id="cb2-54" data-line-number="54"><span class="kw">end</span></a>
<a class="sourceLine" id="cb2-55" data-line-number="55"></a>
<a class="sourceLine" id="cb2-56" data-line-number="56">desc <span class="st">&quot;Deploys the current version to the server.&quot;</span></a>
<a class="sourceLine" id="cb2-57" data-line-number="57">task <span class="st">:deploy</span> =&gt; <span class="st">:remote_environment</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb2-58" data-line-number="58">  <span class="co"># uncomment this line to make sure you pushed your local branch to the remote origin</span></a>
<a class="sourceLine" id="cb2-59" data-line-number="59">  <span class="co"># invoke :'git:ensure_pushed'</span></a>
<a class="sourceLine" id="cb2-60" data-line-number="60">  deploy <span class="kw">do</span></a>
<a class="sourceLine" id="cb2-61" data-line-number="61">    <span class="co"># Put things that will set up an empty directory into a fully set-up</span></a>
<a class="sourceLine" id="cb2-62" data-line-number="62">    <span class="co"># instance of your project.</span></a>
<a class="sourceLine" id="cb2-63" data-line-number="63">    comment <span class="st">&quot;Deploying </span><span class="ot">#{</span>fetch(<span class="st">:application_name</span>)<span class="ot">}</span><span class="st"> to </span><span class="ot">#{</span>fetch(<span class="st">:domain</span>)<span class="ot">}</span><span class="st">:</span><span class="ot">#{</span>fetch(<span class="st">:deploy_to</span>)<span class="ot">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb2-64" data-line-number="64">    command <span class="ot">%{</span><span class="st">pwd</span><span class="ot">}</span></a>
<a class="sourceLine" id="cb2-65" data-line-number="65">    invoke :<span class="st">'git:clone'</span></a>
<a class="sourceLine" id="cb2-66" data-line-number="66">    invoke :<span class="st">'deploy:link_shared_paths'</span></a>
<a class="sourceLine" id="cb2-67" data-line-number="67">    invoke :<span class="st">'bundle:install'</span></a>
<a class="sourceLine" id="cb2-68" data-line-number="68"></a>
<a class="sourceLine" id="cb2-69" data-line-number="69">    <span class="co"># these 2 commands shoudl be run first time only</span></a>
<a class="sourceLine" id="cb2-70" data-line-number="70">    <span class="kw">if</span> fetch(<span class="st">:first_run</span>) == <span class="dv">true</span></a>
<a class="sourceLine" id="cb2-71" data-line-number="71">      invoke :<span class="st">'rails:db_create'</span> <span class="co">#  creates the database</span></a>
<a class="sourceLine" id="cb2-72" data-line-number="72">      invoke :<span class="st">'rails:db_schema_load'</span> <span class="co"># creates tables and columns within the (existing) database following schema.rb</span></a>
<a class="sourceLine" id="cb2-73" data-line-number="73">    <span class="kw">end</span></a>
<a class="sourceLine" id="cb2-74" data-line-number="74"></a>
<a class="sourceLine" id="cb2-75" data-line-number="75">    invoke :<span class="st">'rails:db_migrate'</span></a>
<a class="sourceLine" id="cb2-76" data-line-number="76"></a>
<a class="sourceLine" id="cb2-77" data-line-number="77">    <span class="co"># first time only</span></a>
<a class="sourceLine" id="cb2-78" data-line-number="78">    <span class="kw">if</span> fetch(<span class="st">:first_run</span>) == <span class="dv">true</span></a>
<a class="sourceLine" id="cb2-79" data-line-number="79">      command <span class="ot">%{#{</span>fetch(<span class="st">:rails</span>)<span class="ot">}</span><span class="st"> db:seed</span><span class="ot">}</span></a>
<a class="sourceLine" id="cb2-80" data-line-number="80">    <span class="kw">end</span></a>
<a class="sourceLine" id="cb2-81" data-line-number="81"></a>
<a class="sourceLine" id="cb2-82" data-line-number="82">    invoke :<span class="st">'rails:assets_precompile'</span></a>
<a class="sourceLine" id="cb2-83" data-line-number="83"></a>
<a class="sourceLine" id="cb2-84" data-line-number="84">    <span class="co">#command %{sudo service reload}</span></a>
<a class="sourceLine" id="cb2-85" data-line-number="85"></a>
<a class="sourceLine" id="cb2-86" data-line-number="86">    invoke :<span class="st">'deploy:cleanup'</span></a>
<a class="sourceLine" id="cb2-87" data-line-number="87"></a>
<a class="sourceLine" id="cb2-88" data-line-number="88">    on <span class="st">:launch</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb2-89" data-line-number="89">        command <span class="ot">%{</span><span class="st">mkdir -p tmp/</span><span class="ot">}</span></a>
<a class="sourceLine" id="cb2-90" data-line-number="90">        command <span class="ot">%{</span><span class="st">touch tmp/restart.txt</span><span class="ot">}</span></a>
<a class="sourceLine" id="cb2-91" data-line-number="91">        invoke :<span class="st">'puma:phased_restart'</span></a>
<a class="sourceLine" id="cb2-92" data-line-number="92">    <span class="kw">end</span></a>
<a class="sourceLine" id="cb2-93" data-line-number="93">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb2-94" data-line-number="94"></a>
<a class="sourceLine" id="cb2-95" data-line-number="95">  <span class="co"># you can use `run :local` to run tasks on local machine before of after the deploy scripts</span></a>
<a class="sourceLine" id="cb2-96" data-line-number="96">  <span class="co"># run(:local){ say 'done' }</span></a>
<a class="sourceLine" id="cb2-97" data-line-number="97"><span class="kw">end</span></a>
<a class="sourceLine" id="cb2-98" data-line-number="98"></a></code></pre></div>
<p>_</p>
</section>
</section>
</div>

<div class="row">
        <span class="date  text-right">
            <i class="fa fa-calenda"></i> Posted on June  6, 2018
        </span>
        <span class="tags text-right" style="width: 100%">
            <ul class="list-inline"><li><i class="fa fa-tags"></i></li><li><a href="../../tags/haskell.html">haskell</a></li></ul>
        </span>
</div>

            </div>
            <div id="footer" class="col-md-12">
                <div class="row"><hr /></div>

                <div class="row text-center">
                    powered by  <a href="http://jaspervdj.be/hakyll" target="_blank">Hakyll</a>
                </div>
            </div>
        </div>

        <script type="text/javascript" src="../../js/quotes.js">
        </script>
    </body>
</html>
